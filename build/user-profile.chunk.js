webpackJsonp([5],{18:function(e,t,a){"use strict";function l(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=a(4),o=l(s);t.default=o.default.createClass({displayName:"MessageBox",render:function(){return""===this.props.message?o.default.createElement("div",null):o.default.createElement("div",{className:"card red"},o.default.createElement("div",{className:"card-content white-text"},this.props.message))}})},400:function(e,t,a){"use strict";function l(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=a(4),o=l(s),n=(a(47),a(24)),i=l(n),r=a(18),u=l(r);t.default=o.default.createClass({displayName:"UserProfile",getInitialState:function(){return{hasLocal:!1,hasFacebook:!1,hasGoogle:!1,id:"",expectedKcal:"",role:"",loginFailCount:"",profilePic:"",name:"",email:"",password:"",facebook:"",google:"",status:"EDITING",userCopy:"",message:""}},componentDidMount:function(){var e=this,t="/api/users?userId="+localStorage.getItem("MealAppUserId");i.default.get(t,{headers:{token:localStorage.getItem("MealAppToken")}}).then(function(t){var a=t.data.user;e.setState({userCopy:a}),void 0!=a.local.email&&e.setState({hasLocal:!0}),void 0!=a.facebook&&e.setState({hasFacebook:!0}),void 0!=a.google&&e.setState({hasGoogle:!0}),e.setState({id:a._id,expectedKcal:a.expectedKcal,role:a.role,loginFailCount:a.local.loginFailCount}),e.state.hasLocal&&e.setState({name:a.local.name,email:a.local.email}),e.state.hasFacebook&&e.setState({facebook:a.facebook}),e.state.hasGoogle&&e.setState({google:a.google}),void 0!=a.profilePic&&e.setState({profilePic:a.profilePic})}).catch(function(t){return e.setState({message:t.response.status+": "+t.response.data.message})})},handleUserInfoUpdate:function(){var e=this;if(""==this.state.name)return void this.setState({message:"Please enter a valid name"});var t="/api/users?userId="+this.state.id,a={name:this.state.name,expectedKcal:this.state.expectedKcal};""!=this.state.password&&(a.password=this.state.password),console.log(a),i.default.put(t,a,{headers:{token:localStorage.getItem("MealAppToken")}}).then(function(t){e.setState({message:t.data.message,password:""})}).catch(function(t){return e.setState({message:t.response.status+": "+t.response.data.message})})},handleReset:function(){},handleSubmit:function(e){e.preventDefault(),this.putUser()},render:function(){var e=this;return o.default.createElement("div",null,o.default.createElement("h3",null,"User profile"),o.default.createElement(u.default,{message:this.state.message}),o.default.createElement("p",null,"User ID: ",this.state.id),o.default.createElement("p",null,"User role: ",this.state.role),o.default.createElement("label",null,"Local name: "),o.default.createElement("input",{className:"localField",type:"text",value:this.state.name,disabled:"EDITING"!=this.state.status||!this.state.hasLocal,onChange:function(t){return e.setState({name:t.target.value})}}),o.default.createElement("br",null),o.default.createElement("label",null,"New password: "),o.default.createElement("input",{className:"localField",type:"password",value:this.state.password,disabled:"EDITING"!=this.state.status||!this.state.hasLocal,onChange:function(t){return e.setState({password:t.target.value})}}),o.default.createElement("br",null),o.default.createElement("label",null,"Planned daily energy intake: "),o.default.createElement("input",{className:"localField",type:"number",value:this.state.expectedKcal,disabled:"EDITING"!=this.state.status,onChange:function(t){return e.setState({expectedKcal:t.target.value})}}),o.default.createElement("br",null),o.default.createElement("div",{className:"card-green"},o.default.createElement("div",{className:"card-content white-text"},o.default.createElement("p",null,"Facebook ID: ",void 0==this.state.facebook?"N/A":this.state.facebook.id),o.default.createElement("p",null,"Facebook name: ",void 0==this.state.facebook?"N/A":this.state.facebook.name),o.default.createElement("p",null,"Facebook email: ",void 0==this.state.facebook?"N/A":this.state.facebook.email),o.default.createElement("br",null),o.default.createElement("p",null,"Google ID: ",void 0==this.state.google?"N/A":this.state.google.id),o.default.createElement("p",null,"Google name: ",void 0==this.state.google?"N/A":this.state.google.name),o.default.createElement("p",null,"Google email: ",void 0==this.state.google?"N/A":this.state.google.email))),o.default.createElement("input",{type:"button",value:"Save",onClick:this.handleUserInfoUpdate}),o.default.createElement("input",{type:"button",value:"Reset",onClick:this.handleReset}),o.default.createElement("br",null),o.default.createElement("form",null,o.default.createElement("input",{type:"file",accept:"image/*"}),o.default.createElement("input",{type:"submit",value:"Upload profile picture"})))}})}});